# 定义

数据仓库（Data WareHouse, DW）是一个面向主题的(Subject Oriented)、集成的(Integrated)、相对稳定的(Non-Volatile)、反映历史变化(Time Variant)的数据集合，用于支持管理决策。

## 数据仓库特点

数据仓库本质上是一种特殊的数据组织形式，如下：

- 面向主题，即：数据仓库中表的设计是按照一个个主题进行组织的而非按照业务流程设计；
- 集成性，是指将企业中各大业务系统进行数据集中、整合、加工从而形成全局统一的数据视图；
- 相对稳定性，则是指数据仓库中的数据不会做频繁的增删改操作，相对于业务系统中频繁的事务处理，其数据变化相对稳定；
- 反映历史变化，表明数据仓库通常会保存数据的历史备份，因此就可以从中获取数据历史变化情况。

数据仓库的这些特性满足了分析型应用的需求，可以更好的帮助企业制定管理决策。

# 数据仓库的核心概念

## 维度
维度是一个与业务相关的观察角度，比如我们从地区角度观察哪个地区的销售额最多，那么地区就是一个维度。在数据仓库中我们将这些维度信息存储成一张张数据库表，我们称之为维表。

维表主要分为：单级维、层级维、变化维。

- 单级维是指一对一的代码表，不存在层级关系，最主要的作用是将事实表中的代码显示为标题（名称）。
- 层级维是具有分层结构的维度表，比如地区维，层级往上可以到区、市、省、国家等。$$
- 缓慢变化维是随着时间属性变化的，如机构维，机构名称会随时间而改变。

**维表通常由维主键编码和维度名称以及其他属性字段组成。**

## 度量
**度量**是反映企业运行情况或状态的一些数值指标，是业务量化的表示，可以用来监测业务的成效，比如销售额、利润来反应企业业绩。

## 事实表
事实表也被称为主题表，它是由若干维度和度量组合而成，表达期望分析的主题。事实表中的多个维度的组合决定了事实表的数据详细程度，这种详细程度我们称之为颗粒度。以颗粒度来划分主题表的话，通常会有三种事实表：事务粒度事实表、周期快照粒度事实表、累积快照粒度事实表。

在数据仓库中，维度表和事实表的设计需要遵循一些重要原则，即一致性维度和一致性事实。

所谓一致性维度是指在同一个集市内，两个维度如果有关系，要么就是完全一样的，要么就是一个维度在数学意义上是另一个维度的子集；
所谓一致性事实，即是指表达相同业务含义的度量（或称为指标）需要在描述定义和计算口径、度量单位等保持一致，杜绝系统间同词不同义或同义不同词的问题。

# 数据仓库分层架构

数据仓库有分层结构，每个分层结构都有各自的作用，大抵上分层结构分为：贴源层、整合层、集市层、汇总层。

- 贴源层，就是将所有涉及业务系统的数据抽取到这一层集中存放，同时也会保留历史数据，这一层基本保留了与源系统一样的结构和数据。
- 整合层，会保留最细颗粒的所有历史数据，它面向主题、规范化建模，站在全局的视角上规划主题、整合业务模型，在数据模型维度上完成重大的转变。
- 集市层，面向某个业务主题的多维模型集合。通过预计算、预连接、维度规范化等方式进一步将业务系统的范式模型转变成面向主题的多维模型。
- 汇总层，它应技术或业务需要而建，直面需求，方便展现，同时提高数据的存储性能。

数据仓库分层架构从整体上来看，是将数据从分散到集中、从细粒度到高度汇总、从业务模型到分析型模型转变的过程，从而更好的为分析型系统提供后台数据支撑。








